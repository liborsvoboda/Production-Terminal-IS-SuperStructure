WINDOWNAME:Aktuální Podprocesy
INPUT:BUTTON:USR_BUTTON:Načíst Data:Enabled/True:Submit/True:
SQL:SELECT coalesce((select v_ter_proc2.osoba + odb.jmeno + '' + odb.prijmeni FROM dba.odb_osoby odb with(index( pk_odb_osoby)) WHERE odb.osoba=v_ter_proc2.osoba),'') as 'Jméno',v_ter_out.opv as 'Zakázka',coalesce((select zp.nomenklatura FROM dba.v_opvvyrza zp with(index( pk_v_opvvyrza)) WHERE zp.opv=v_ter_out.opv),'') as 'Karta' ,v_ter_out.polozka as 'Operace',v_ter_proc2.zdroj as 'Zdroj',v_ter_proc.id_vyr_oper as 'ID Výr.Operace',coalesce((select max(n.user_kat_oznaceni) FROM dba.nomenklatura n with(index( pk_nomenklatura)) WHERE n.id_nomen= (select zp.id_nomen FROM dba.v_opvvyrza zp with(index( pk_v_opvvyrza)) WHERE zp.opv=v_ter_out.opv)),'') as 'Kat.Označení' ,coalesce((select oper.popis from dba.v_opvoper oper where oper.opv = v_ter_out.opv AND oper.polozka = (SELECT  v_ter_out.polozka FROM dba.v_ter_proc2 v_t_p2, dba.v_ter_proc v_ter_proc,dba.v_ter_out v_ter_out,dba.v_ter_typ_udalosti v_ter_typ_udalosti WHERE v_t_p2.id_podprocesu > 1 and v_ter_proc.id_procesu = v_t_p2.id_procesu   and v_ter_out.id_vyr_oper = case when 1 in(select 1 from dba.v_ter_out v_ter_out2 where v_ter_out2.id_vyr_oper = v_ter_proc.id_vyr_oper) then v_ter_proc.id_vyr_oper else '' end and v_ter_typ_udalosti.typ_udalosti = v_t_p2.typ_udalosti and v_t_p2.id_podprocesu = v_ter_proc2.id_podprocesu) ),'') as 'Popis',v_ter_typ_udalosti.nazev as 'Stav',v_ter_proc2.user_chyba as 'Chyba',coalesce((select pers.stredisko FROM dba.pers pers with(index( pk_pers)) WHERE pers.oscislo=v_ter_proc2.osoba),'') stredisko,v_ter_proc2.id_podprocesu as 'ID Podprocesu' from dba.v_ter_proc2 v_ter_proc2 with(index( v_ter_proc2_osoba)) ,dba.v_ter_proc v_ter_proc with(index( pk_v_ter_proc)) ,dba.v_ter_out v_ter_out with(index( pk_v_ter_out)) ,dba.v_ter_typ_udalosti v_ter_typ_udalosti with(index( pk_v_ter_typ_udalosti)) where  v_ter_proc2.id_podprocesu > 1 and v_ter_proc.id_procesu = v_ter_proc2.id_procesu and v_ter_out.id_vyr_oper = case when 1 in(select 1 from dba.v_ter_out v_ter_out2 with(index( pk_v_ter_out)) where v_ter_out2.id_vyr_oper = v_ter_proc.id_vyr_oper) then v_ter_proc.id_vyr_oper else '' end and v_ter_typ_udalosti.typ_udalosti = v_ter_proc2.typ_udalosti AND (( v_ter_proc2.osoba = '*USR_FLD1*' AND v_ter_proc2.stav = 0 )) AND ( v_ter_proc2.id_podprocesu<>1) AND (((v_ter_proc2.stav=0))) AND (((v_ter_proc2.xplan = '420'))) ORDER BY v_ter_proc2.id_podprocesu DESC
NOAUTOSUM:True
AUTOSUBMIT:180
SUBBUTTON:UKONCIT.SQL:SUB_BTN1:Ukončit:Enabled/True:Submit/Next: 
FORSUBVIEW:USR_FLD2/11:

